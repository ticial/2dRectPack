{"version":3,"file":"index.js","sources":["../src/packer/Box.ts","../src/packer/Packer.ts","../src/index.ts"],"sourcesContent":["export class Box {\r\n  private _width: number;\r\n  private _height: number;\r\n  private _top: number;\r\n  private _left: number;\r\n  private _right: number;\r\n  private _bottom: number;\r\n  private _id: number;\r\n  private _mark: number;\r\n  needRemove: boolean = false;\r\n\r\n  constructor(width = 0, height = 0, left = 0, top = 0, right = 0, bottom = 0, id = 0, mark = 0) {\r\n    this._width = width;\r\n    this._height = height;\r\n    this._top = top;\r\n    this._left = left;\r\n    this._right = right;\r\n    this._bottom = bottom;\r\n    this._id = id;\r\n    this._mark = mark;\r\n  }\r\n\r\n  get width(): number {\r\n    return this._width;\r\n  }\r\n\r\n  get height(): number {\r\n    return this._height;\r\n  }\r\n\r\n  get top(): number {\r\n    return this._top;\r\n  }\r\n\r\n  get left(): number {\r\n    return this._left;\r\n  }\r\n\r\n  get right(): number {\r\n    return this._right;\r\n  }\r\n\r\n  get bottom(): number {\r\n    return this._bottom;\r\n  }\r\n\r\n  get id(): number {\r\n    return this._id;\r\n  }\r\n\r\n  set id(value: number) {\r\n    this._id = value;\r\n  }\r\n\r\n  get mark(): number {\r\n    return this._mark;\r\n  }\r\n\r\n  set mark(value: number) {\r\n    this._mark = value;\r\n  }\r\n\r\n  static createFromSize(width: number, height: number, id = 0, mark = 0): Box {\r\n    return new Box(width, height, 0, 0, width, height, id, mark);\r\n  }\r\n\r\n  static createFromCoord(left: number, top: number, right: number, bottom: number, id = 0, mark = 0): Box {\r\n    return new Box(right - left, bottom - top, left, top, right, bottom, id, mark);\r\n  }\r\n\r\n  clone(): Box {\r\n    return new Box(this.width, this.height, this.left, this.top, this.right, this.bottom, this.id, 0);\r\n  }\r\n\r\n  setSize(width: number, height: number) {\r\n    this._width = width;\r\n    this._height = height;\r\n    this._right = this.left + width;\r\n    this._bottom = this.top + height;\r\n  }\r\n\r\n  setCoord(left: number, top: number, right: number, bottom: number) {\r\n    this._width = right - left;\r\n    this._height = bottom - top;\r\n    this._top = top;\r\n    this._left = left;\r\n    this._right = right;\r\n    this._bottom = bottom;\r\n  }\r\n\r\n  square() {\r\n    return this.width * this.height;\r\n  }\r\n\r\n  static isContained(a: Box, b: Box) {\r\n    return a.left >= b.left && a.top >= b.top && a.right <= b.right && a.bottom <= b.bottom;\r\n  }\r\n\r\n  static isTouched(a: Box, b: Box) {\r\n    return a.right > b.left && a.left < b.right && a.bottom > b.top && a.top < b.bottom;\r\n  }\r\n\r\n  static isSeparated(a: Box, b: Box) {\r\n    return !(b.left >= a.right || b.right <= a.left || b.top >= a.bottom || b.bottom <= a.top);\r\n  }\r\n}\r\n","import { Box } from \"./Box\";\r\nimport { PackDirection } from \"./types\";\r\n\r\nconst BOTTOM_RIGHT_MARK = Number.MAX_SAFE_INTEGER;\r\n\r\n/**\r\n * Packer class for efficiently packing boxes into a container.\r\n */\r\nclass Packer {\r\n  private boxes: Box[] = [];\r\n  private packedBoxes: Box[] = [];\r\n  private freeBoxes: Box[] = [];\r\n  private badBoxes: Box[] = [];\r\n  private notPlacedBoxes: Box[] = [];\r\n  private isPrepared = false;\r\n  private _fullness = -1;\r\n\r\n  constructor(private containerWidth: number, private containerHeight: number, private direction: PackDirection = \"none\") {}\r\n\r\n  /**\r\n   * Set the packing direction for the Packer.\r\n   * @param direction - The packing direction.\r\n   * @remarks\r\n   * This method sets the packing direction for the Packer. The direction parameter\r\n   * specifies how the boxes should be arranged during the packing process.\r\n   * - \"none\": No specific direction, let the algorithm choose the optimal direction.\r\n   * - \"left\": Pack boxes aligning them from left to right.\r\n   * - \"top\": Pack boxes aligning them from top to bottom.\r\n   */\r\n  setDirection(direction: PackDirection) {\r\n    this.direction = direction;\r\n    this.isPrepared = false;\r\n  }\r\n\r\n  /**\r\n   * Resizes the container dimensions for the Packer instance.\r\n   *\r\n   * @param width - The new width of the container.\r\n   * @param height - The new height of the container.\r\n   */\r\n  resizeContainer(width: number, height: number) {\r\n    this.containerWidth = width;\r\n    this.containerHeight = height;\r\n    this.isPrepared = false;\r\n  }\r\n\r\n  /**\r\n   * Clears all data, resetting the state of the packing algorithm.\r\n   */\r\n  clear() {\r\n    this.boxes.length = 0;\r\n    this.reset();\r\n  }\r\n\r\n  /**\r\n   * Resets the state of the packing algorithm, clearing various lists and resetting variables.\r\n   * This method is called internally during the preparation phase.\r\n   */\r\n  private reset() {\r\n    this.packedBoxes.length = 0;\r\n    this.freeBoxes.length = 0;\r\n    this.badBoxes.length = 0;\r\n    this.notPlacedBoxes.length = 0;\r\n    this._fullness = -1;\r\n    this.isPrepared = false;\r\n  }\r\n\r\n  /**\r\n   * Adds a box to the list of boxes, automatically rotating it if the width is greater than the height.\r\n   *\r\n   * @param width - The width of the box.\r\n   * @param height - The height of the box.\r\n   * @param id - The identifier for the box (optional, default is 0).\r\n   */\r\n  addBox(width: number, height: number, id: number = 0) {\r\n    const box = Box.createFromSize(Math.min(width, height), Math.max(width, height), id);\r\n    this.boxes.push(box);\r\n    this.isPrepared = false;\r\n  }\r\n\r\n  /**\r\n   * Prepares the algorithm for packing by filtering out bad boxes, sorting them, and adding an initial free box.\r\n   * This method should be called before packing the boxes.\r\n   */\r\n  prepare() {\r\n    this.reset();\r\n    this.boxes = this.filterBadBoxes(this.boxes);\r\n    this.boxes.sort((a, b) => (a.width === b.width ? b.height - a.height : b.width - a.width));\r\n    this.addFreeBox(0, 0, this.containerWidth, this.containerHeight);\r\n    this.isPrepared = true;\r\n  }\r\n\r\n  /**\r\n   * Filters out oversized and undersized boxes, adding them to the list of bad boxes.\r\n   *\r\n   * @param boxes - An array of boxes to be filtered.\r\n   * @returns An array of filtered boxes that meet the size criteria.\r\n   */\r\n  private filterBadBoxes(boxes: Box[]) {\r\n    return boxes.filter(box => {\r\n      if (\r\n        (box.width > this.containerWidth && box.width > this.containerHeight) ||\r\n        (box.height > this.containerWidth && box.height > this.containerHeight) ||\r\n        (box.width <= 0 || box.height <= 0)\r\n      ) {\r\n        this.badBoxes.push(box);\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Packs the available boxes into containers using a specific algorithm.\r\n   * The method first prepares the data if not already prepared.\r\n   * It then iterates through the boxes, finding the best position for each,\r\n   * and adds the packed boxes to the list of packedBoxes.\r\n   * Finally, it collects the boxes that couldn't be placed into notPlacedBoxes.\r\n   *\r\n   * @returns An array containing the packed boxes.\r\n   */\r\n  pack(): Box[] {\r\n    // Prepare data if not already prepared\r\n    if (!this.isPrepared) this.prepare();\r\n\r\n    const boxes = this.boxes;\r\n    const packedBoxes = this.packedBoxes;\r\n    const testBox = new Box();\r\n\r\n    // Iterate through the remaining unpacked boxes\r\n    while (boxes.length !== packedBoxes.length) {\r\n      let bestScore = 0;\r\n      let bestBoxIndex = -1;\r\n      let bestBox: Box;\r\n\r\n      // Find the best position for each box\r\n      for (let i = 0, total = boxes.length; i < total; i++) {\r\n        if (boxes[i].needRemove) continue;\r\n        this.findBoxPosition(boxes[i], testBox);\r\n        if (testBox.mark > bestScore) {\r\n          bestScore = testBox.mark;\r\n          bestBox = testBox.clone();\r\n          bestBoxIndex = i;\r\n        }\r\n      }\r\n\r\n      // Check if a valid position was found\r\n      if (bestBoxIndex === -1 || !bestBox) {\r\n        break;\r\n      }\r\n\r\n      // Add the bestBox to the list of packed boxes and mark the original box as removed\r\n      this.addPackedBox(bestBox);\r\n      boxes[bestBoxIndex].needRemove = true;\r\n    }\r\n\r\n    // Collect the boxes that couldn't be placed into notPlacedBoxes\r\n    for (const box of boxes) {\r\n      if (!box.needRemove) {\r\n        this.notPlacedBoxes.push(box);\r\n      }\r\n      box.needRemove = false;\r\n    }\r\n\r\n    return this.packedBoxes;\r\n  }\r\n\r\n  /**\r\n   * Finds the best position for a given box within the available free boxes.\r\n   *\r\n   * @param box - The box to be positioned.\r\n   * @param testBox - The test box to store the final coordinates and score.\r\n   */\r\n  private findBoxPosition(box: Box, testBox: Box) {\r\n    let bestScore = -1;\r\n    testBox.mark = 0;\r\n\r\n    for (const freeBox of this.freeBoxes) {\r\n      // Check if the box can fit horizontally\r\n      if (freeBox.width >= box.width && freeBox.height >= box.height) {\r\n        let score = this.calculateScore(freeBox.left, freeBox.top, freeBox.left + box.width, freeBox.top + box.height);\r\n        if (score > bestScore) {\r\n          testBox.setCoord(freeBox.left, freeBox.top, freeBox.left + box.width, freeBox.top + box.height);\r\n          bestScore = score;\r\n        }\r\n      }\r\n      // Check if the box can fit vertically\r\n      if (freeBox.width >= box.height && freeBox.height >= box.width) {\r\n        let score = this.calculateScore(freeBox.left, freeBox.top, freeBox.left + box.height, freeBox.top + box.width);\r\n        if (score > bestScore) {\r\n          testBox.setCoord(freeBox.left, freeBox.top, freeBox.left + box.height, freeBox.top + box.width);\r\n          bestScore = score;\r\n        }\r\n      }\r\n    }\r\n    testBox.mark = bestScore;\r\n    testBox.id = box.id;\r\n  }\r\n\r\n  /**\r\n   * Calculates a score based on the specified coordinates, considering the placement of existing packed boxes.\r\n   * The score is determined by the length of common intervals with existing boxes.\r\n   *\r\n   * @param left - The left coordinate of the box.\r\n   * @param top - The top coordinate of the box.\r\n   * @param right - The right coordinate of the box.\r\n   * @param bottom - The bottom coordinate of the box.\r\n   * @returns The calculated score.\r\n   */\r\n  private calculateScore(left: number, top: number, right: number, bottom: number) {\r\n    let score = 0;\r\n\r\n    if (left === 0 || right === this.containerWidth) score += bottom - top;\r\n    if (top === 0 || bottom === this.containerHeight) score += right - left;\r\n\r\n    for (const box of this.packedBoxes) {\r\n      if (box.left === right || box.right === left) score += this.commonIntervalLength(box.top, box.bottom, top, bottom);\r\n      if (box.top === bottom || box.bottom === top) score += this.commonIntervalLength(box.left, box.right, left, right);\r\n    }\r\n\r\n    if (this.direction === \"top\") score += top;\r\n    if (this.direction === \"left\") score += left;\r\n    return score;\r\n  }\r\n\r\n  /**\r\n   * Calculates the length of the common interval between two ranges.\r\n   *\r\n   * @param startA - The start coordinate of the first range.\r\n   * @param endA - The end coordinate of the first range.\r\n   * @param startB - The start coordinate of the second range.\r\n   * @param endB - The end coordinate of the second range.\r\n   * @returns The length of the common interval or 0 if there is no overlap.\r\n   */\r\n  private commonIntervalLength(startA: number, endA: number, startB: number, endB: number): number {\r\n    return endA < startB || endB < startA ? 0 : Math.min(endA, endB) - Math.max(startA, startB);\r\n  }\r\n\r\n  /**\r\n   * Adds a packed box to the list of packed boxes, updating the list of free boxes by splitting and removing intersecting boxes.\r\n   *\r\n   * @param box - The box to be added to the list of packed boxes.\r\n   */\r\n  private addPackedBox(box: Box) {\r\n    const freeBoxes = this.freeBoxes;\r\n\r\n    // Split and mark intersecting free boxes\r\n    for (const freeBox of this.freeBoxes) {\r\n      if (Box.isSeparated(freeBox, box)) {\r\n        this.splitFreeBox(freeBox, box);\r\n        freeBox.needRemove = true;\r\n      }\r\n    }\r\n\r\n    // Mark fully contained free boxes\r\n    for (let i = 0; i < freeBoxes.length - 1; i++) {\r\n      const box1 = freeBoxes[i];\r\n      if (box1.needRemove) continue;\r\n      for (let j = i + 1; j < freeBoxes.length; j++) {\r\n        const box2 = freeBoxes[j];\r\n        if (box2.needRemove) continue;\r\n        if (Box.isContained(box1, box2)) {\r\n          box1.needRemove = true;\r\n          break;\r\n        }\r\n        if (Box.isContained(box2, box1)) {\r\n          box2.needRemove = true;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Remove marked free boxes and add the packed box\r\n    this.freeBoxes = this.freeBoxes.filter(box => !box.needRemove);\r\n    this.packedBoxes.push(box);\r\n  }\r\n  /**\r\n   * Splits the given free box based on the dimensions of the box.\r\n   * Adds new free boxes created from the non-overlapping regions.\r\n   *\r\n   * @param freeBox - The free box to be split.\r\n   * @param box - The box determining the split dimensions.\r\n   */\r\n  private splitFreeBox(freeBox: Box, box: Box) {\r\n    if (box.top > freeBox.top && box.top < freeBox.bottom) {\r\n      this.addFreeBox(freeBox.left, freeBox.top, freeBox.right, box.top);\r\n    }\r\n    if (box.bottom < freeBox.bottom) {\r\n      this.addFreeBox(freeBox.left, box.bottom, freeBox.right, freeBox.bottom);\r\n    }\r\n    if (box.left > freeBox.left && box.left < freeBox.right) {\r\n      this.addFreeBox(freeBox.left, freeBox.top, box.left, freeBox.bottom);\r\n    }\r\n    if (box.right < freeBox.right) {\r\n      this.addFreeBox(box.right, freeBox.top, freeBox.right, freeBox.bottom);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds a new free box to the list of free boxes based on the specified coordinates.\r\n   *\r\n   * @param left - The left coordinate of the new free box.\r\n   * @param top - The top coordinate of the new free box.\r\n   * @param right - The right coordinate of the new free box.\r\n   * @param bottom - The bottom coordinate of the new free box.\r\n   */\r\n  private addFreeBox(left: number, top: number, right: number, bottom: number): void {\r\n    const box = Box.createFromCoord(left, top, right, bottom);\r\n    this.freeBoxes.push(box);\r\n  }\r\n\r\n  /**\r\n   * Calculates the fullness ratio of the container based on the free and packed boxes.\r\n   * The fullness ratio represents the occupied space in the container.\r\n   *\r\n   * @returns The fullness ratio, ranging from 0 to 1, where 0 means empty and 1 means fully occupied.\r\n   */\r\n  private calculateFullness() {\r\n    const freeBoxes = this.freeBoxes;\r\n    let nextMark = 1;\r\n\r\n    // Mark bottom-right corner of full-size free boxes\r\n    for (const box of freeBoxes) {\r\n      if (box.right === this.containerWidth && box.bottom === this.containerHeight) box.mark = BOTTOM_RIGHT_MARK;\r\n      else box.mark = 0;\r\n    }\r\n\r\n    // Mark touched free boxes with the same mark\r\n    for (let i = 0; i < freeBoxes.length - 1; i++) {\r\n      const box1 = freeBoxes[i];\r\n      for (let j = i + 1; j < freeBoxes.length; j++) {\r\n        const box2 = freeBoxes[j];\r\n        if (Box.isTouched(box1, box2)) {\r\n          let mark = Math.max(box1.mark, box2.mark);\r\n          if (mark === 0) mark = nextMark++;\r\n          box2.mark = box1.mark = mark;\r\n        }\r\n      }\r\n    }\r\n\r\n    const innerSquare = freeBoxes.reduce((accum, box) => (box.mark !== BOTTOM_RIGHT_MARK ? accum + box.square() : accum), 0);\r\n    const boxSquare = this.packedBoxes.reduce((accum, box) => accum + box.square(), 0);\r\n\r\n    // Calculate the fullness ratio\r\n    this._fullness = 1 - innerSquare / (boxSquare + innerSquare);\r\n  }\r\n\r\n  /**\r\n   * Retrieves the fullness ratio of the container. If the fullness has not been calculated yet,\r\n   * it calculates it using the `calculateFullness` method and returns the result.\r\n   *\r\n   * @returns The fullness ratio, ranging from 0 to 1, where 0 means empty and 1 means fully occupied.\r\n   */\r\n  get fullness() {\r\n    if (this._fullness === -1) this.calculateFullness();\r\n    return this._fullness;\r\n  }\r\n\r\n  boxesSize() {\r\n    return this.boxes.length;\r\n  }\r\n\r\n  getBoxes() {\r\n    return this.boxes;\r\n  }\r\n}\r\n\r\nexport default Packer;\r\n","import Packer from \"./packer/Packer\";\r\nimport { PackDirection, RectCoord, Size } from \"./packer/types\";\r\n\r\nconst template = document.getElementById(\"rect-data-template\") as HTMLTemplateElement;\r\nconst containerDiv = document.querySelector(\".container\") as HTMLElement;\r\nconst fullnessSpan = document.getElementById(\"fullness\") as HTMLElement;\r\nconst rectList = document.querySelector(\".rect-list\") as HTMLElement;\r\n\r\nconst rectWidthInput = document.getElementById(\"rect-width\") as HTMLInputElement;\r\nconst rectHeightInput = document.getElementById(\"rect-height\") as HTMLInputElement;\r\nconst addRectButton = document.getElementById(\"add-rect-button\") as HTMLElement;\r\n\r\nconst containerWidthInput = document.getElementById(\"container-width\") as HTMLInputElement;\r\nconst containerHeightInput = document.getElementById(\"container-height\") as HTMLInputElement;\r\nconst setupContainerButton = document.getElementById(\"setup-container-button\") as HTMLElement;\r\n\r\nconst packingDirectionSelect = document.getElementById(\"packing-direction\") as HTMLSelectElement;\r\n\r\nlet blocksParams: Size[] = [];\r\nlet containerSize: Size = { width: 350, height: 300 };\r\n\r\ncontainerWidthInput.value = String(containerSize.width);\r\ncontainerHeightInput.value = String(containerSize.height);\r\n\r\nconst packer = new Packer(containerSize.width, containerSize.height, \"none\");\r\n\r\naddRectButton.onclick = event => {\r\n  event.preventDefault();\r\n  const rect: Size = {\r\n    width: parseInt(rectWidthInput.value),\r\n    height: parseInt(rectHeightInput.value)\r\n  };\r\n  addBlock(rect, blocksParams.length);\r\n};\r\n\r\nsetupContainerButton.onclick = event => {\r\n  event.preventDefault();\r\n  resizeContainer(parseInt(containerWidthInput.value), parseInt(containerHeightInput.value));\r\n};\r\n\r\npackingDirectionSelect.onchange = event => {\r\n  changeDirection(packingDirectionSelect.value as PackDirection);\r\n};\r\n\r\nfunction resizeContainer(width: number, height: number) {\r\n  containerSize.width = width;\r\n  containerSize.height = height;\r\n  packer.resizeContainer(width, height);\r\n  update();\r\n}\r\n\r\nfunction addBlocks(blocks: Size[]) {\r\n  blocks.forEach((block, i) => {\r\n    packer.addBox(block.width, block.height, i);\r\n  });\r\n\r\n  blocksParams = blocks;\r\n  fillRectList();\r\n  update();\r\n}\r\n\r\nfunction addBlock(block: Size, id: number) {\r\n  packer.addBox(block.width, block.height, id);\r\n  blocksParams.push(block);\r\n  fillRectList();\r\n  update();\r\n}\r\n\r\nfunction changeDirection(direction: PackDirection) {\r\n  packer.setDirection(direction);\r\n  update();\r\n}\r\n\r\nfunction pack() {\r\n  const boxes = packer.pack();\r\n  const blockCoordinates: RectCoord[] = boxes.map(({ top, left, right, bottom, id }) => ({\r\n    top,\r\n    left,\r\n    right,\r\n    bottom,\r\n    initialOrder: id\r\n  }));\r\n  const fullness = packer.fullness;\r\n\r\n  return {\r\n    fullness,\r\n    blockCoordinates\r\n  };\r\n}\r\n\r\nfunction update() {\r\n  const { fullness, blockCoordinates } = pack();\r\n  drawBlocks(containerSize, fullness, blockCoordinates);\r\n}\r\n\r\nfunction fillRectList() {\r\n  rectList.innerHTML = \"\";\r\n  for (const block of blocksParams) {\r\n    const rectItem = template.content.cloneNode(true) as HTMLElement;\r\n    (<HTMLElement>rectItem.querySelector(\".width\")).innerHTML = block.width + \"\";\r\n    (<HTMLElement>rectItem.querySelector(\".height\")).innerHTML = block.height + \"\";\r\n    rectList.appendChild(rectItem);\r\n  }\r\n}\r\n\r\nfunction getRandomColor() {\r\n  var letters = \"0123456789ABCDEF\".split(\"\");\r\n  var color = \"#\";\r\n  for (var i = 0; i < 6; i++) {\r\n    color += letters[Math.round(Math.random() * 15)];\r\n  }\r\n  return color;\r\n}\r\n\r\nfunction createColorMapGenerator() {\r\n  const colorMap = new Map<string, string>();\r\n  const colorSet = new Set<string>();\r\n\r\n  return function(key: string) {\r\n    let color = colorMap.get(key);\r\n    if (!color) {\r\n      do {\r\n        color = getRandomColor();\r\n      } while (colorSet.has(color));\r\n      colorSet.add(color);\r\n      colorMap.set(key, color);\r\n    }\r\n    return color;\r\n  };\r\n}\r\n\r\nfunction drawBlocks(containerSize: Size, fullness: number, blockCoordinates: RectCoord[]) {\r\n  fullnessSpan.textContent = (fullness * 100).toFixed(2);\r\n  containerDiv.innerHTML = \"\";\r\n  containerDiv.style.minWidth = containerSize.width + \"px\";\r\n  containerDiv.style.minHeight = containerSize.height + \"px\";\r\n\r\n  const getColor = createColorMapGenerator();\r\n\r\n  for (const block of blockCoordinates) {\r\n    const rectDiv = document.createElement(\"div\") as HTMLElement;\r\n\r\n    const width = block.right - block.left;\r\n    const height = block.bottom - block.top;\r\n\r\n    rectDiv.classList.add(\"rect\");\r\n    rectDiv.style.bottom = block.top + \"px\";\r\n    rectDiv.style.left = block.left + \"px\";\r\n    rectDiv.style.width = width + \"px\";\r\n    rectDiv.style.height = height + \"px\";\r\n\r\n    const sizeKey = Math.min(width, height) + \"x\" + Math.max(width, height);\r\n    rectDiv.style.backgroundColor = getColor(sizeKey);\r\n\r\n    containerDiv.append(rectDiv);\r\n\r\n    const rectIdDiv = document.createElement(\"div\") as HTMLElement;\r\n    rectIdDiv.classList.add(\"rect-id\");\r\n    rectIdDiv.textContent = String(block.initialOrder);\r\n    rectDiv.append(rectIdDiv);\r\n  }\r\n}\r\n\r\nasync function loadBlocksData() {\r\n  try {\r\n    const response = await fetch(\"./blocksData.json\");\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`Failed to load blocksData.json (HTTP ${response.status})`);\r\n    }\r\n\r\n    const blocksParams = await response.json();\r\n    addBlocks(blocksParams);\r\n    update();\r\n  } catch (error) {\r\n    console.error(\"Error loading blocksData.json:\", error.message);\r\n  }\r\n}\r\n\r\nloadBlocksData();\r\n"],"names":[],"mappings":"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"}